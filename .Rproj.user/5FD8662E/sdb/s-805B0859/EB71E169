{
    "collab_server" : "",
    "contents" : "#' Residuals for Ordinal Regression Models\n#'\n#' Surrogate and jittered residuals for ordinal regression models.\n#'\n#' @param object\n#'\n#' @param type\n#'\n#' @param nsim Integer specifying the number of bootstrap replicates to use.\n#'\n#' @return A numeric vector of residuals.\n#'\n#' @references\n#' Liu, Dungang and Zhang, Heping. Residuals and Diagnostics for Ordinal\n#' Regression Models: A Surrogate Approach.\n#' \\emph{Journal of the American Statistical Association} (accepted).\n#'\n#' @export\nresids <- function(object, ...) {\n  UseMethod(\"resids\")\n}\n\n\n#' @rdname resids\n#' @export\nresids.default <- function(object, type = c(\"surrogate\", \"jitter\"), nsim = 1,\n                           ...) {\n\n  # Sanity check\n  if (!inherits(object, c(\"clm\", \"polr\", \"vglm\"))) {\n    stop(deparse(substitute(object)), \" should be of class \\\"clm\\\", \\\"polr\\\", \",\n         \"or \\\"vglm\\\".\")\n  }\n\n  # Extract number of observations, response values, and truncation bounds\n  n.obs <- nobs(object)\n  y <- getResponseValues(object)\n  bounds <- getBounds(object)\n\n  # Construct residuals\n  mr <- getMeanResponse(object)\n  res <- getSurrogateResiduals(y, n.obs = n.obs, mean.response = mr,\n                               bounds = bounds)\n  if (nsim > 1) {  # bootstrap\n    boot.res <- boot.index <- matrix(nrow = n.obs, ncol = nsim)\n    for(i in seq_len(nsim)) {\n      boot.index[, i] <- sample(n.obs, replace = TRUE)\n      mr <- getMeanResponse(object)[boot.index[, i]]\n      boot.res[, i] <-\n        getSurrogateResiduals(y[boot.index[, i]], n.obs = n.obs,\n                              mean.response = mr, bounds = bounds)\n    }\n    attr(res, \"boot.reps\") <- boot.res\n    attr(res, \"boot.id\") <- boot.index\n  }\n\n  # Return residuals\n  res\n\n}\n",
    "created" : 1499116831582.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "220227557",
    "id" : "EB71E169",
    "lastKnownWriteTime" : 1499118660,
    "last_content_update" : 1499118660456,
    "path" : "~/Desktop/Dropbox/devel/ordr/R/resids.R",
    "project_path" : "R/resids.R",
    "properties" : {
    },
    "relative_order" : 8,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}